{"remainingRequest":"/Users/mohammedherrag/projet_PFA/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mohammedherrag/projet_PFA/front/src/components/List.vue?vue&type=style&index=0&id=264bddce&scoped=true&lang=css&","dependencies":[{"path":"/Users/mohammedherrag/projet_PFA/front/src/components/List.vue","mtime":1624550253543},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI3JlbG9hZCB7CiAgbWFyZ2luLXRvcDogMTBweDsKfQouZXJyb3IgewogIG1hcmdpbi10b3A6IDEwcHg7CiAgY29sb3I6IHJlZDsKfQouZXJyb3I6OmJlZm9yZSB7CiAgY29udGVudDogIuKbkCAiOwp9Cg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"list\">\n    <b-card title=\"☰ Je consulte les empreintes\">\n      <b-card-text>\n        Je liste mes empreintes ou l'ensemble des empreintes référencées. En cliquant sur l'empreinte, j'accède au détail.\n      </b-card-text>\n\n        <b-form-group label-for=\"nothing\" label-cols-sm=\"2\">\n          <b-form-checkbox switch size=\"lg\"\n            v-on:input=\"scopeInput\"\n            id=\"scope\" v-model=\"scope\" name=\"scope\" value=\"myonly\" unchecked-value=\"all\"\n          >Mes empreintes uniquement</b-form-checkbox>\n        \n          <b-button id=\"reload\" size=\"lg\" @click=\"reload\" :title=\"needMetamask\" :disabled=\"$store.state.providerType===false || loading\">\n            <div v-if=\"loading\"><b-spinner type=\"grow\" style=\"width: 1.9rem; height: 1.9rem;\"/> Chargement</div>\n            <div v-else><i class=\"icon-repeat\"/> {{hashes?'Rec':'C'}}harger</div>\n          </b-button>\n          <div v-if=\"error\" class=\"error\">{{error}}</div>\n        </b-form-group>\n\n        <b-table v-if=\"hashes\"\n          small borderless hover selectable select-mode=\"single\"\n          :items=\"hashes\" :fields=\"fields\"\n          :per-page=\"perPage\" :current-page=\"currentPage\" @row-selected=\"selected\">\n        </b-table>\n        <b-pagination v-if=\"hashes\" v-model=\"currentPage\" :total-rows=\"totalRows\" :per-page=\"perPage\" align=center></b-pagination>\n        <b-card v-if=\"info\" class=\"json-code\">\n          <pre><code id=\"info\">{{info}}</code></pre>\n        </b-card>\n    </b-card>\n  </div>\n</template>\n\n<script>\n\nimport BlckchnAntProver from '../lib/BlckchnAntProver.js'\n\nexport default {\n  name: 'List',\n  props: {\n  },\n  data() {\n    return {\n      loading: false,\n      scope: 'myonly',\n\n      hashes: null,\n      info: null,\n      error: null,\n\n      fields: [{\n        key: 'h',\n        label: 'Empreinte'\n      }],\n      totalRows: 0,\n      perPage: 10,\n      currentPage: 1\n    }\n  },\n\n  computed: {\n    needMetamask: function () {\n      return this.$store.state.providerType===false ? 'Veuillez installer Metamask' : null\n    }\n  },\n  \n  methods: {\n    reload() {\n      this.loading = true\n      this.info = null\n      this.hashes = null\n      this.totalRows = 0\n      this.error = null\n      if (this.scope == 'myonly') {\n        BlckchnAntProver.getAccounts().then((accounts) => {\n          let account = accounts[0]\n          BlckchnAntProver.listBySender(account, (error, result) => {\n            this.loading = false\n            if (error) {\n              this.error = error\n              return\n            }\n            this.hashes = result.map(c => { return {h: c} })\n            this.totalRows = result.length\n          })\n        })\n      } else {\n        BlckchnAntProver.list((error, result) => {\n          this.loading = false\n          if (error) {\n            this.error  = error\n            return\n          }\n          this.hashes = result.map(c => { return {h: c} })\n          this.totalRows = result.length\n        })\n      }\n    },\n    selected(item) {\n      console.log('selected', item)\n      BlckchnAntProver.findHash(item[0].h, (error, result) => {\n        console.log('result', error, result)\n        if (error) {\n          this.error  = error\n          return\n        }\n        this.info = result\n      })\n    },\n    scopeInput() {\n      this.reload()\n    }\n  }\n}\n</script>\n\n<style scoped>\n#reload {\n  margin-top: 10px;\n}\n.error {\n  margin-top: 10px;\n  color: red;\n}\n.error::before {\n  content: \"⛐ \";\n}\n</style>\n"]}]}