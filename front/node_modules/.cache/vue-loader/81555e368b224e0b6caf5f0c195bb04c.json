{"remainingRequest":"/Users/mohammedherrag/projet_PFA/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mohammedherrag/projet_PFA/front/src/components/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mohammedherrag/projet_PFA/front/src/components/List.vue","mtime":1624550253543},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mohammedherrag/projet_PFA/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgQmxja2NobkFudFByb3ZlciBmcm9tICcuLi9saWIvQmxja2NobkFudFByb3Zlci5qcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTGlzdCcsCiAgcHJvcHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2NvcGU6ICdteW9ubHknLAoKICAgICAgaGFzaGVzOiBudWxsLAogICAgICBpbmZvOiBudWxsLAogICAgICBlcnJvcjogbnVsbCwKCiAgICAgIGZpZWxkczogW3sKICAgICAgICBrZXk6ICdoJywKICAgICAgICBsYWJlbDogJ0VtcHJlaW50ZScKICAgICAgfV0sCiAgICAgIHRvdGFsUm93czogMCwKICAgICAgcGVyUGFnZTogMTAsCiAgICAgIGN1cnJlbnRQYWdlOiAxCiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIG5lZWRNZXRhbWFzazogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucHJvdmlkZXJUeXBlPT09ZmFsc2UgPyAnVmV1aWxsZXogaW5zdGFsbGVyIE1ldGFtYXNrJyA6IG51bGwKICAgIH0KICB9LAogIAogIG1ldGhvZHM6IHsKICAgIHJlbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmluZm8gPSBudWxsCiAgICAgIHRoaXMuaGFzaGVzID0gbnVsbAogICAgICB0aGlzLnRvdGFsUm93cyA9IDAKICAgICAgdGhpcy5lcnJvciA9IG51bGwKICAgICAgaWYgKHRoaXMuc2NvcGUgPT0gJ215b25seScpIHsKICAgICAgICBCbGNrY2huQW50UHJvdmVyLmdldEFjY291bnRzKCkudGhlbigoYWNjb3VudHMpID0+IHsKICAgICAgICAgIGxldCBhY2NvdW50ID0gYWNjb3VudHNbMF0KICAgICAgICAgIEJsY2tjaG5BbnRQcm92ZXIubGlzdEJ5U2VuZGVyKGFjY291bnQsIChlcnJvciwgcmVzdWx0KSA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcgogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuaGFzaGVzID0gcmVzdWx0Lm1hcChjID0+IHsgcmV0dXJuIHtoOiBjfSB9KQogICAgICAgICAgICB0aGlzLnRvdGFsUm93cyA9IHJlc3VsdC5sZW5ndGgKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICBCbGNrY2huQW50UHJvdmVyLmxpc3QoKGVycm9yLCByZXN1bHQpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy5lcnJvciAgPSBlcnJvcgogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaGFzaGVzID0gcmVzdWx0Lm1hcChjID0+IHsgcmV0dXJuIHtoOiBjfSB9KQogICAgICAgICAgdGhpcy50b3RhbFJvd3MgPSByZXN1bHQubGVuZ3RoCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHNlbGVjdGVkKGl0ZW0pIHsKICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkJywgaXRlbSkKICAgICAgQmxja2NobkFudFByb3Zlci5maW5kSGFzaChpdGVtWzBdLmgsIChlcnJvciwgcmVzdWx0KSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIGVycm9yLCByZXN1bHQpCiAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICB0aGlzLmVycm9yICA9IGVycm9yCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdGhpcy5pbmZvID0gcmVzdWx0CiAgICAgIH0pCiAgICB9LAogICAgc2NvcGVJbnB1dCgpIHsKICAgICAgdGhpcy5yZWxvYWQoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"list\">\n    <b-card title=\"☰ Je consulte les empreintes\">\n      <b-card-text>\n        Je liste mes empreintes ou l'ensemble des empreintes référencées. En cliquant sur l'empreinte, j'accède au détail.\n      </b-card-text>\n\n        <b-form-group label-for=\"nothing\" label-cols-sm=\"2\">\n          <b-form-checkbox switch size=\"lg\"\n            v-on:input=\"scopeInput\"\n            id=\"scope\" v-model=\"scope\" name=\"scope\" value=\"myonly\" unchecked-value=\"all\"\n          >Mes empreintes uniquement</b-form-checkbox>\n        \n          <b-button id=\"reload\" size=\"lg\" @click=\"reload\" :title=\"needMetamask\" :disabled=\"$store.state.providerType===false || loading\">\n            <div v-if=\"loading\"><b-spinner type=\"grow\" style=\"width: 1.9rem; height: 1.9rem;\"/> Chargement</div>\n            <div v-else><i class=\"icon-repeat\"/> {{hashes?'Rec':'C'}}harger</div>\n          </b-button>\n          <div v-if=\"error\" class=\"error\">{{error}}</div>\n        </b-form-group>\n\n        <b-table v-if=\"hashes\"\n          small borderless hover selectable select-mode=\"single\"\n          :items=\"hashes\" :fields=\"fields\"\n          :per-page=\"perPage\" :current-page=\"currentPage\" @row-selected=\"selected\">\n        </b-table>\n        <b-pagination v-if=\"hashes\" v-model=\"currentPage\" :total-rows=\"totalRows\" :per-page=\"perPage\" align=center></b-pagination>\n        <b-card v-if=\"info\" class=\"json-code\">\n          <pre><code id=\"info\">{{info}}</code></pre>\n        </b-card>\n    </b-card>\n  </div>\n</template>\n\n<script>\n\nimport BlckchnAntProver from '../lib/BlckchnAntProver.js'\n\nexport default {\n  name: 'List',\n  props: {\n  },\n  data() {\n    return {\n      loading: false,\n      scope: 'myonly',\n\n      hashes: null,\n      info: null,\n      error: null,\n\n      fields: [{\n        key: 'h',\n        label: 'Empreinte'\n      }],\n      totalRows: 0,\n      perPage: 10,\n      currentPage: 1\n    }\n  },\n\n  computed: {\n    needMetamask: function () {\n      return this.$store.state.providerType===false ? 'Veuillez installer Metamask' : null\n    }\n  },\n  \n  methods: {\n    reload() {\n      this.loading = true\n      this.info = null\n      this.hashes = null\n      this.totalRows = 0\n      this.error = null\n      if (this.scope == 'myonly') {\n        BlckchnAntProver.getAccounts().then((accounts) => {\n          let account = accounts[0]\n          BlckchnAntProver.listBySender(account, (error, result) => {\n            this.loading = false\n            if (error) {\n              this.error = error\n              return\n            }\n            this.hashes = result.map(c => { return {h: c} })\n            this.totalRows = result.length\n          })\n        })\n      } else {\n        BlckchnAntProver.list((error, result) => {\n          this.loading = false\n          if (error) {\n            this.error  = error\n            return\n          }\n          this.hashes = result.map(c => { return {h: c} })\n          this.totalRows = result.length\n        })\n      }\n    },\n    selected(item) {\n      console.log('selected', item)\n      BlckchnAntProver.findHash(item[0].h, (error, result) => {\n        console.log('result', error, result)\n        if (error) {\n          this.error  = error\n          return\n        }\n        this.info = result\n      })\n    },\n    scopeInput() {\n      this.reload()\n    }\n  }\n}\n</script>\n\n<style scoped>\n#reload {\n  margin-top: 10px;\n}\n.error {\n  margin-top: 10px;\n  color: red;\n}\n.error::before {\n  content: \"⛐ \";\n}\n</style>\n"]}]}